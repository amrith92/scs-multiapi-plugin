components:
  messages:
    OrderCreated:
      payload:
        $ref: '#/components/schemas/Order'
    InvocationEvent:
      name: InvocationEvent
      title: API Invocation event payload
      payload:
        $ref: '#/components/schemas/Payload'
  schemas:
    HeaderItem:
      type: object
      properties:
        Key:
          type: string
        Value:
          type: string
      required:
        - Key
        - Value
    Payload:
      type: object
      properties:
        timeStamp:
          type: string
        invokerId:
          type: string
        invokerName:
          type: string
        clientId:
          type: string
        clientName:
          type: string
        clientDescription:
          type: string
        clientType:
          type: string
        sellerId:
          type: string
        scope:
          type: string
        method:
          type: string
        serviceName:
          type: string
        requestUri:
          type: string
        ipAddress:
          type: string
        traceId:
          type: string
        responseCode:
          type: string
        protocol:
          type: string
        responseSize:
          type: string
        requestPayload:
          type: string
        requestHeaders:
          type: array
          items:
            $ref: '#/components/schemas/HeaderItem'
        responseHeaders:
          type: array
          items:
            $ref: '#/components/schemas/HeaderItem'
        response:
          type: string
        latency:
          type: string
    CreateOrder:
      order:
        $ref: '#/components/schemas/Order'
      waiter:
        $ref: '#/components/schemas/Waiter'
    Waiter:
      type: object
      properties:
        ref:
          type: string
        timestamp:
          type: string
          format: 'dd/mm/yyyy hh:MM:sss'
        table:
          type: string
    Order:
      type: object
      properties:
        ref:
          type: string
        clientRef:
          type: string
        amount:
          type: number
          format: decimal
        lines:
          type: array
          items:
            $ref: '#/components/schemas/OrderLine'
    OrderLine:
      type: object
      required:
      - ref
      - products
      properties:
        ref:
          type: string
        products:
          type: array
          items:
            $ref: '#/components/schemas/OrderProduct'
    OrderProduct:
      type: object
      required:
      - ref
      - productRef
      - price
      - quantity
      properties:
        ref:
          type: string
        productRef:
          type: string
        price:
          type: string
          format: decimal
        quantity:
          type: string
          format: decimal